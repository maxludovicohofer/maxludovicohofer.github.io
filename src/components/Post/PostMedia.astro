---
import Fullscreenable from "@layouts/Fullscreenable.astro";
import Dissolving from "@layouts/Dissolving.astro";
import type { ComponentProps } from "astro/types";
import Media from "@layouts/Media.astro";
import Text from "@layouts/Text.astro";

interface Props extends ComponentProps<typeof Media> {}

const {
  class: className = "",
  "data-umami-event": umamiEvent,
  alt,
  ...props
} = Astro.props;

const [visibleAlt, hiddenAlt] = alt.split("HIDDEN ");
const displayedAlt = (visibleAlt || hiddenAlt!).trim();
---

<Dissolving
  ><Fullscreenable
    class={`${className} rounded-3xl`}
    data-umami-event={umamiEvent ?? displayedAlt}
    ><Media alt={displayedAlt} {...props} /></Fullscreenable
  >{
    visibleAlt && (
      <Text subtitle class="-mb-4">
        {displayedAlt}
      </Text>
    )
  }</Dissolving
>
