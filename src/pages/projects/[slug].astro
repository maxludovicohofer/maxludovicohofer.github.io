---
import Page from "@layouts/Page.astro";
import Post from "@layouts/Post.astro";
import { getCollection } from "astro:content";

// Generate a new path for every collection entry
export const getStaticPaths = async () =>
  (await getCollection("projects", ({ data: { draft } }) => !draft)).map(
    (content) => ({
      params: { slug: content.slug },
      props: { content },
    })
  );

const { content } = Astro.props;

// TODO MAKE "OTHER PROJECTS" SECTION AFTER POST
---

<Page title={content.data.title} description={content.data.description}
  ><Post content={content} /></Page
>
