---
import Projects from "@components/Projects.astro";
import Page from "@layouts/Page.astro";
import Post from "@layouts/Post.astro";
import { getCollection } from "astro:content";
import Text from "@layouts/Text.astro";

// Generate a new path for every collection entry
export const getStaticPaths = async () =>
  (await getCollection("projects", ({ data: { draft } }) => !draft)).map(
    (entry) => ({
      params: { slug: entry.slug },
      props: { entry },
    })
  );

const { entry } = Astro.props;
---

<Page title={entry.data.title} description={entry.data.description}>
  <Post entry={entry} followedByOther>
    <Fragment slot="footer"
      ><Text tag="b" className="font-normal">Roles</Text>
      {entry.data.roles.join(", ")}<br /><Text tag="b" className="font-normal"
        >Tech</Text
      >
      {entry.data.tech.join(", ")}</Fragment
    >
  </Post>
  <div class="-mt-24 lg:-mt-20">
    <Projects exclude={[entry]} />
  </div>
</Page>
