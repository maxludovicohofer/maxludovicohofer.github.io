---
import type { PostCollectionKey } from "@integrations/content";
import { capitalize } from "@integrations/text";
import Post from "@post/Post.astro";
import ContentList from "@ui/ContentList.astro";
import type { ComponentProps } from "astro/types";

interface Props extends ComponentProps<typeof Post> {
  collection: PostCollectionKey;
  partOfPost?: boolean;
  listProps?: Partial<ComponentProps<typeof ContentList>>;
}

const {
  collection,
  listProps,
  partOfPost,
  class: className = "",
  ...props
} = Astro.props;
---

<Post
  container
  fullWidth={!partOfPost}
  inline={partOfPost}
  class={`${className} ${partOfPost ? "mt-3" : ""}`}
  {...props}
  ><Fragment slot="title"
    >{partOfPost ? `Other ${collection}` : capitalize(collection)}</Fragment
  ><ContentList
    collection={collection}
    discreteHighlight={partOfPost}
    class={`${partOfPost ? "2xl:grid-cols-2" : "lg:grid-cols-2 2xl:grid-cols-3"} -mx-[calc(max(100dvw-40rem,0rem)+3rem)] lg:mx-0 px-[calc(max(100dvw-40rem,0rem)+3rem)] lg:px-0`}
    numberOfItemsToLoadEager={partOfPost ? undefined : 2}
    {...listProps}
  /></Post
>
